<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta property="og:title" content="Si tÃ« pÃ«rdorni Docker Compose?" /><meta property="og:description" content="" /><meta property="og:url" content="/2022/01/si-te-perdorim-docker-compose" /><meta property="og:image" content="" /><link rel="stylesheet" href="https://programerat.github.io//assets/css/style.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/toc.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/syntax.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous"><title> Si tÃ« pÃ«rdorni Docker Compose? - Programerat</title><link rel="shortcut icon" href="https://programerat.github.io//assets/images/programeret.png"><link rel="alternate" type="application/atom+xml" title="Programerat" href="https://programerat.github.io//atom.xml"><link rel="alternate" type="application/json" title="Programerat" href="https://programerat.github.io//feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://programerat.github.io//sitemap.xml" /><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *{padding:0}html{font-size:15px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}#intro{color:var(--main-text-color);width:50%;margin:20px auto}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: #0197f6;--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75}a{color:var(--link-color);text-decoration:none}.post{color:var(--main-text-color);min-width:min-content;max-width:max-content;width:60%;margin:5.5rem auto}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{width:auto;border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;color:var(--light-text-color);border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;text-overflow:ellipsis;font-weight:bold;width:100%}.article-icon{height:30px;width:30px;text-align:right;display:inline-block}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"â€º";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><body><nav class="navbar bg-light"><div class="container"><ul class="nav justify-content-start"><li class="nav-item"> <a class="navbar-brand" href="https://programerat.github.io/"> <img src="https://programerat.github.io//assets/images/programeret.png" alt="" width="20" height="20" class="d-inline-block align-text-top"> Programerat </a></li><li class="nav-item"> <a class="btn btn-outline-default" aria-current="page" href="/detyrat"> Detyrat </a></li></ul><ul class="nav justify-content-end"><li class="nav-item"> <button class="btn btn-outline-primary" onclick="sendNewLike()" aria-current="page"> PÃ«lqeje <span class="badge bg-dark" id="like_counter">0</span> ğŸ‰ </button></li></ul></div></nav><main><div class="bg-light me-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden"><div class="my-3 py-3"><h2 class="display-5"> Si tÃ« pÃ«rdorni Docker Compose?</h2><p> <time datetime="2022-01-13T11:12:00+01:00"> 6 min </time></p><p class="lead"> <a href="https://programerat.github.io//tag/Docker-compose,php,mysql">#Docker-compose,php,mysql</a></p></div><div class="hide-phone bg-body shadow-sm mx-auto header-content" style="height: 300px; border-radius: 21px 21px 0 0;"></div></div><article class="container pull-content"><div class="row"><div class="col-md-9 blog-main"> <br><p>NÃ« <a href="https://programerat.github.io/2022/01/si-te-krijoni-aplikacionin-tuaj-te-pare-me-docker">artikullin e parÃ«</a> kemi bÃ«rÃ« njÃ« prezentim tÃ« shkurtÃ«r pÃ«r tÃ« parÃ« se Ã§farÃ« Ã«shtÃ« Docker, si mund ta instaloni dhe si mund ta konfiguroni Dockerfile pÃ«r njÃ« aplikacion bazik nÃ« PHP. NÃ« kÃ«tÃ« artikull do tÃ« tregojmÃ« si mund ta pÃ«rdorim Docker Compose si dhe do tÃ« ndÃ«rtojmÃ« njÃ« aplikacion tÃ« thjeshtÃ« nÃ« PHP qÃ« do tÃ« komunikojÃ« me MySQL.</p><h3 id="docker-compose"> Docker Compose <a href="#docker-compose">#</a></h3><p>NÃ« artikullin e kaluar mÃ«suam si tÃ« krijojmÃ« njÃ« Dockerfile dhe qÃ« pÃ«rmes komandave <code class="language-plaintext highlighter-rouge">docker build</code> dhe <code class="language-plaintext highlighter-rouge">docker run</code> mund tÃ« ndÃ«rtojmÃ« dhe tÃ« ekzekutojmÃ« njÃ« kontejner. MirÃ«po Ã§farÃ« nÃ«se duam tÃ« ekzekutojm mÃ« shumÃ« se njÃ« kontejner? Me siguri qÃ« do tÃ« jetÃ« e shumÃ« lodhshme tÃ« ekezkutojm kÃ«to komanda mÃ« shumÃ« se njÃ« herÃ«.</p><p>PÃ«r kÃ«tÃ« ka zgjidhje, dhe ajo Ã«shtÃ« qÃ« tÃ« pÃ«rdorni Dcoker Compose, njÃ« skedar qÃ« pÃ«rmbanÃ« njÃ« bashkÃ«si tÃ« instruksioneve pÃ«r tÃ« pÃ«rformuar njÃ« veprim.</p><p>Ashtu siq kemi krijuar Dockerfile pÃ«r tÃ« pÃ«rcaktuar se si duket imazhi juaj, nÃ« skedarin<code class="language-plaintext highlighter-rouge">docker-compose.yml</code> mund tÃ« pÃ«rmendni imazhin(et) qÃ« dÃ«shironi tÃ« pÃ«rdorni, si dhe parametrat e komandave tÃ« ekzekutimit dhe ndÃ«rtimit tÃ« docker. PÃ«r tÃ« kuptuar mÃ« mirÃ« do tÃ« marrim njÃ« shembull duke krijuar skedarin tonÃ« tÃ« parÃ« <code class="language-plaintext highlighter-rouge">docker-compose.yml.</code></p><p>SÃ« pari hapeni terminalin tuaj dhe shikojeni versionin e docker compose nÃ« makinÃ«n tuaj duke shkruar kÃ«tÃ« komand.</p><p><code class="language-plaintext highlighter-rouge">docker-compose --version</code></p><p><img src="../../assets/images/docker-compose-v.png" alt="dockerComposeVersion" /></p><p>Do tÃ« krijojmÃ« njÃ« skedar bazik tÃ« docker compose, pÃ«r shembullin nÃ« artikullin e parÃ«.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">website</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">php-demo</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./src:/var/www/html</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8000:80</span>
</code></pre></div></div><p>NÃ« listÃ«n e mÃ«poshtme keni pÃ«rshkrimin e secilit seksion tÃ« <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>:</p><ol><li>NÃ« rreshtin e parÃ« duhet tÃ« shkruani versionin e docker compose.</li><li><code class="language-plaintext highlighter-rouge">services</code> pÃ«rmbanÃ« njÃ« listÃ« tÃ« tÃ« gjitha veglave/serviset qÃ« keni pÃ«r qÃ«llim tÃ« ekzekutoni. UnÃ« e kam emÃ«ruar <code class="language-plaintext highlighter-rouge">website</code> pÃ«r arsye se do printojmÃ« njÃ« titull nÃ« shfletues, por ju mund ta emÃ«roni edhe ndryshe, nuk ka rÃ«ndÃ«si. Duhet tÃ« mbani mend se kÃ«tÃ« emer do ta pÃ«rdorim pÃ«r tÃ« komunikuar me kontejner tÃ« tjerÃ«.</li><li><code class="language-plaintext highlighter-rouge">container_name</code> kÃ«tu duhet tÃ« vendosni emrin e kontejnerit.</li><li><code class="language-plaintext highlighter-rouge">image</code> duhet tÃ« vendosni emrin e imazhit.</li><li>NÃ«n seksioni <code class="language-plaintext highlighter-rouge">build</code> ju shihni se kemi (<code class="language-plaintext highlighter-rouge">context</code>) qÃ« do tÃ« thotÃ« Ã«shtÃ« duke kÃ«rkuar pÃ«r Dockerfile. Pra duhet tÃ« shkruani direktoriumin se ku gjendet Dockerfile i juaj.</li></ol><p>Skedari i juaj <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> Ã«shtÃ« gati, pÃ«rpara se tÃ« ekzekutoni Ã«shtÃ« mirÃ« tÃ« shikojm nÃ«se konfigurimi nÃ« skedarin tonÃ« Ã«shtÃ« nÃ« rregull duke ekzekutuar nÃ« terminal komandÃ«n <code class="language-plaintext highlighter-rouge">docker-compose config</code>.</p><p><img src="../../assets/images/dc-config.png" alt="dc-config" /></p><p>Siq shihet edhe nÃ« foton paraprake pra konfigurimet tona kan qenÃ« nÃ« rregull. Tani mund tÃ« ekzekutojm <code class="language-plaintext highlighter-rouge">docker compose up</code> pÃ«r tÃ« krijuar imazhin(nÃ«se nuk ekziton) dhe pÃ«r tÃ« krijuar kontejneret.</p><p><img src="../../assets/images/dc-up.png" alt="dc-up" /></p><p>Tani do tÃ« instalojmÃ« MySQL. Kam zgjedhur MySQL v8 ndÃ«rsa ju mund tÃ« zgjedhni edhe ndonjÃ« version tjetÃ«r. Do tÃ« editojmÃ« <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> dhe do tÃ« shtojmÃ« konfigurimet pÃ«r tÃ« instaluar MySQL.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">mysql</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">mysql</span>
        <span class="na">container_name</span><span class="pi">:</span> <span class="s">mysql</span>
        <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">MYSQL_ROOT_PASSWORD=.rootpassword.</span>
          <span class="pi">-</span> <span class="s">MYSQL_DATABASE=php-demo</span>
          <span class="pi">-</span> <span class="s">MYSQL_USER=admin</span>
          <span class="pi">-</span> <span class="s">MYSQL_PASSWORD=.mysqlpassword</span>
        <span class="na">ports</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">8082:3306"</span>
  <span class="na">website</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">php-demo</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile</span>
    <span class="na">links</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">mysql:database"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./src:/var/www/html</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8000:80</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mysql</span>      
</code></pre></div></div><p>NÃ« kÃ«tÃ« konfigurim ju mund tÃ« shihni se kemi shtuar njÃ« seksion tÃ« ri <code class="language-plaintext highlighter-rouge">envrionment</code> i cili pÃ«rmbanÃ« disa parametra qÃ« lidhen me serverin MySQL. Porti i parazgjedhur <code class="language-plaintext highlighter-rouge">3306</code> Ã«shtÃ« mapuar(eng. mapped) me portin <code class="language-plaintext highlighter-rouge">8082</code>. Seksioni restart: gjithmonÃ« nÃ«nkupton kurdo qÃ« fillon kontejneri, MyQL do tÃ« fillojÃ« po ashtu. Mund tÃ« keni vÃ«rejtur se kemi shtuar edhe seksionin <code class="language-plaintext highlighter-rouge">depends_on</code>, kjo nÃ«nkupton qÃ« pÃ«r tÃ« filluar servisi PHP, duhet sÃª pari tÃ« filloj serveri MySQL.</p><p>Duhet tÃ« bÃ«jmÃ« disa ndryshime nÃ« Dockerfile, ku do tÃ« shtojmÃ« konfigurime pÃ«r instalimin e MySQL.</p><div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> php:latest</span>
<span class="k">RUN </span>apt-get update <span class="se">\
</span>    <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span>
<span class="k">RUN </span>docker-php-ext-install pdo pdo_mysql mysqli
</code></pre></div></div><p>Ju duhet tÃ« instaloni njÃ« paket menagjuse pÃ«r tÃ« ekzekutuar komandat e juaja mbrenda kontejnerit. Psh. <code class="language-plaintext highlighter-rouge">apt-get</code> Ã«shtÃ« njÃ« paket menagjuse qÃ« ndihmon nÃ« trajtimin e paketave nÃ« Linux.</p><blockquote><p>PÃ«r mÃ« shumÃ« detaje ju lutem lexoni mÃ« shumÃ« pÃ«r <a href="https://ubuntu.com/server/docs/package-management">Paketat Menagjuse nÃ« Ubuntu</a>.</p></blockquote><p>Kemi instaluar PHP extension si dhe MySQL. NÃ« kÃ«tÃ« rast docker ofron docker-php-ext-install pÃ«r te instaluar shtesat pÃ«r PHP. NÃ«se dÃ«shironi mund tÃ« instaloni edhe paketen menagjuse tÃ« famshme <a href="https://getcomposer.org/doc/">PHP Composer</a>.</p><p>PÃ«r tÃ« implementuar ndryshimet qÃ« i kemi bÃ«rÃ« nÃ« Dockerfile ne duhet tÃ« ekzekutojm komandÃ«n <code class="language-plaintext highlighter-rouge">docker-compose up --build</code>. NÃ«se nuk e shtojm <code class="language-plaintext highlighter-rouge">--build</code> nuk do ti mer ndryshimet e reja qÃ« i kemi shtuar.</p><p>Ndoshta jeni duke pytur veten se si mund tÃ« shohim nÃ«se Ã«shtÃ« instaluar paketa menagjuse ose a Ã«shtÃ« duke ekzekutuar/running MySQL?</p><h3 id="lidhshmÃ«ria-nÃ«-mes-kontejnerÃ«ve-nÃ«-docker"> LidhshmÃ«ria nÃ« mes kontejnerÃ«ve nÃ« Docker <a href="#lidhshmÃ«ria-nÃ«-mes-kontejnerÃ«ve-nÃ«-docker">#</a></h3><p>Tash do tÃ« shohim si Ã«shtÃ« bÃ«rÃ« lidhshmÃ«ria nÃ« mes kontejnerÃ«ve nÃ« Docker.</p><p>PÃ«rmendÃ«m mÃ« lart se Docker na lejon me i ekzekutu komadat nÃ« kotejnerin qÃ« kemi krijuar dhe kÃ«tÃ« mund ta bÃ«jm duke ekzekutar komandÃ«n <code class="language-plaintext highlighter-rouge">docker exec</code>. Vihet pytja si mund tÃ« kyqem nÃ« MySQL? SÃ« pari ne duhet tÃ« dijm emrin e imazhit pÃ«r MySQL, dhe kÃ«tÃ« informat e marin duke ekzekutuar <code class="language-plaintext highlighter-rouge">docker ps -a</code> nÃ« terminal.</p><p>Shikoni konfigurimet nÃ« <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> qÃ« kemi bÃ«rÃ« dhe e shihni qÃ« emrin e kontejnerit kemi vendos <code class="language-plaintext highlighter-rouge">mysql-server-80</code>. Dhe pÃ«rgjigjen e pytjÃ«s qÃ« bÃ«m mund ta marrim duke ekzekutuar kÃ«tÃ« kommand nÃ« terminal: <code class="language-plaintext highlighter-rouge">docker exec -it mysql bash -l</code></p><p><code class="language-plaintext highlighter-rouge">-it</code> do tÃ« thot njÃ« terminal jo aktive <code class="language-plaintext highlighter-rouge">bash</code> Unix shell dhe gjuhe komanduse command language</p><p><img src="../../assets/images/exec-it.png" alt="dc-exec" /></p><p>Tash jemi mrena kontejnerit, na lejohet tÃ« shkruajm komanda tÃ« Linux pasi kemi instaluar paketen menagjuse <code class="language-plaintext highlighter-rouge">apt-get</code>. Shkruani komandÃ«n <code class="language-plaintext highlighter-rouge">ls</code> ose Ã§farÃ« do komande tjetÃ«r pÃ«r tÃ« testuar.</p><p>PÃ«r tu kyqur nÃ« databazÃ« duhet tÃ« shkruani kÃ«tÃ« komand <code class="language-plaintext highlighter-rouge">mysql -u root -p</code>.</p><p><code class="language-plaintext highlighter-rouge">-u</code>Ã«shtÃ« user <code class="language-plaintext highlighter-rouge">-p</code> Ã«shtÃ« password</p><p><img src="../../assets/images/connectdb.png" alt="dc-connectdb" /></p><p>NÃ«se dÃ«shironi tÃ« shihni tÃ« gjitha databazat, duhet tÃ« shkruani nÃ« terminalin tuaj <code class="language-plaintext highlighter-rouge">show databases;</code>.</p><p><img src="../../assets/images/showdb.png" alt="dc-showdb" /></p><p>Pra ktu treguam se a Ã«shtÃ« ekzekutar MySQL brenda Docker. Por si mund tÃ« ndÃ«rveproj MySQL jasht docker? Si mund tÃ« bÃ«je lidhjen MySQL client me MySQL server mbrenda kontejner? KÃ«tÃ« lidhje mund ta bÃ«jm nÃ«se bÃ«jm port forwarding.</p><p>SÃ« pari duhet tÃ« dijm <code class="language-plaintext highlighter-rouge">id</code> e kontejnerit si dhe <code class="language-plaintext highlighter-rouge">portin</code> dhe kÃ«to informata mund tÃ« gjejm duke ekzekutuar kommanden <code class="language-plaintext highlighter-rouge">docker ps -a</code>. Take screenshot. Mund tÃ« shihni se si Porti Ã«shtÃ« percjell si dhe nÃ« cilin IP.</p><p>NÃ« rastin ton kemi <code class="language-plaintext highlighter-rouge">0.0.0.0:8082-&gt;3306/tcp</code>. Pra <code class="language-plaintext highlighter-rouge">0.0.0.0</code> Ã«shtÃ« host dhe porti Ã«shtÃ« <code class="language-plaintext highlighter-rouge">8082</code>.</p><p>NjÃ« komand tjeter se si mund tÃ« shihni portin e njÃ« kontejnerit <code class="language-plaintext highlighter-rouge">docker port &lt;containerid&gt;</code>.</p><h3 id="ndÃ«rveprimi-nÃ«-mes-disa-kontejnerve-nÃ«-docker"> NdÃ«rveprimi nÃ« mes disa kontejnerve nÃ« Docker <a href="#ndÃ«rveprimi-nÃ«-mes-disa-kontejnerve-nÃ«-docker">#</a></h3><p>Pra kuptuam se si docker mund tÃ« kominikoj jasht, por Ã§farÃ« nÃ«se kontejnerÃ«t duhet tÃ« ndÃ«rveproj mes vete?</p><p>NjÃ« mÃ«nyr Ã«shtÃ« tÃ« lidhemi nÃ«permes IP sÃ« brendshme. KÃ«tÃ« mund tÃ« shihni duke shkruar komandÃ«n nÃ« terminalin tuaj <code class="language-plaintext highlighter-rouge">docker inspect &lt;container-id&gt;</code>, ky container-id Ã«shtÃ« ID e kontejnerit pÃ«r MySQL.</p><p>Tash do tÃ« editojm index.php dhe tÃ« shkruajm kodin pÃ«r tÃ« bÃ«rÃ« lidhjen me databazÃ«.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;?php</span>
<span class="nv">$host</span> <span class="o">=</span> <span class="s1">'mysql'</span><span class="p">;</span>

<span class="c1">// Database use name</span>
<span class="nv">$user</span> <span class="o">=</span> <span class="s1">'MYSQL_USER'</span><span class="p">;</span>

<span class="c1">//database user password</span>
<span class="nv">$pass</span> <span class="o">=</span> <span class="s1">'MYSQL_PASSWORD'</span><span class="p">;</span>

<span class="c1">// check the MySQL connection status</span>
<span class="nv">$conn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">mysqli</span><span class="p">(</span><span class="nv">$host</span><span class="p">,</span> <span class="nv">$user</span><span class="p">,</span> <span class="nv">$pass</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">connect_error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s2">"Connection failed: "</span> <span class="mf">.</span> <span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">connect_error</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Connected to MySQL server successfully!"</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre></div></div><p>Pasi qÃ« keni pÃ«rfunduar editimin e <code class="language-plaintext highlighter-rouge">index.php</code> mund te shikoni nÃ« shfletues http://localhost:8000 nÃ«se Ã«shtÃ« printuar teksti <code class="language-plaintext highlighter-rouge">Connected to MySQL server successfully!</code>.</p><p><code class="language-plaintext highlighter-rouge">curl http://localhost:8000</code></p><p>NÃ«se doni tÃ« ndalni <code class="language-plaintext highlighter-rouge">docker-compose</code>, atÃ«her duhet tÃ« shkruani kÃ«tÃ« komand <code class="language-plaintext highlighter-rouge">docker-compose down</code>.</p><h3 id="konkluzioni"> Konkluzioni <a href="#konkluzioni">#</a></h3><p>NÃ« kÃ«tÃ« artikull mÃ«suam se si mund tÃ« konfigurojm mjesdise tÃ« shumÃ«fishta me ndihmÃ«n e docker-compose, si dhe shembullin pÃ«r docker-compose mund tÃ« gjeni ne <a href="https://github.com/Programerat/docker-compose-demo">Github</a>.</p><p>NÃ«se keni ndonjÃ« pyetje ose feedback ju lutem ndjehuni tÃ« lirÃ« tÃ« postoni mÃ« poshtÃ«.</p></div><aside class="col-md-3 blog-sidebar"><section class="toc sticky-top"><ul><li><a href="#docker-compose">Docker Compose</a></li><li><a href="#lidhshmÃ«ria-nÃ«-mes-kontejnerÃ«ve-nÃ«-docker">LidhshmÃ«ria nÃ« mes kontejnerÃ«ve nÃ« Docker</a></li><li><a href="#ndÃ«rveprimi-nÃ«-mes-disa-kontejnerve-nÃ«-docker">NdÃ«rveprimi nÃ« mes disa kontejnerve nÃ« Docker</a></li><li><a href="#konkluzioni">Konkluzioni</a></li></ul><svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg"><path stroke="#444" stroke-width="3" fill="transparent" stroke-dasharray="0, 0, 0, 1000" stroke-linecap="round" stroke-linejoin="round" transform="translate(-0.5, -0.5)" /> </svg></section></aside></div></article><section class="container"><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/2022/01/si-te-krijoni-aplikacionin-tuaj-te-pare-me-docker"><div class="nav-arrow">Tjetra</div><span class="post-title">Si tÃ« krijoni aplikacionin tuaj tÃ« parÃ« me Docker</span> </a> <a class="post-nav-item post-nav-next" href="/2022/02/modelet-e-strukturimit-te-kodit-modeli-dekorues"><div class="nav-arrow">Tjetra</div><span class="post-title">Si ta pÃ«rdorim modelin dekorues (eng. Decorator Pattern).</span> </a></nav></section><div class="container"> <script src="https://utteranc.es/client.js" repo="programerat/programerat.github.io" issue-term="title" label="Komento" theme="github-dark" crossorigin="anonymous" async> </script></div><script src="https://programerat.github.io//assets/js/toc.js"></script> <script src="https://programerat.github.io//assets/js/like_storage.js"></script></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><div class="container"><footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"><div class="col-md-4 d-flex align-items-center"> <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1"> <img src="https://programerat.github.io//assets/images/programeret.png" alt="" width="20" height="20" class="d-inline-block align-text-top"> </a> <span class="text-muted">2022 Programerat</span></div><ul class="nav col-md-4 justify-content-end list-unstyled d-flex" style="font-size: 24px;"><li class="ms-3"><a class="text-muted" href="https://github.com/programerat"><i class="fa fa-github " width="24" height="24" aria-hidden="true"></i></a></li><li class="ms-3"><a class="text-muted" href="https://www.youtube.com/channel/UCi5M70eXEbQkAV4fyfrbOuQ"><i class="fa fa-youtube " width="24" height="24" aria-hidden="true"></i></a></li><li class="ms-3"><a class="text-muted" href="https://join.slack.com/t/programerat/shared_invite/zt-1c9wrdeb7-1jViyn7ljTgKSU6PoE1w6w"><i width="24" height="24" class="fa fa-slack " aria-hidden="true"></i></a></li><li class="ms-3"><a class="text-muted" href="https://facebook.com/programerat"><i class="fa fa-facebook " width="24" height="24" aria-hidden="true"></i></a></li></ul></footer></div><script src="https://programerat.github.io//assets/js/like_storage.js"></script></html>

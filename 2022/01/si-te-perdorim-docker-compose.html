<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://programerat.github.io//assets/css/style.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/brands.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/syntax.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Si të përdorni Docker Compose? - Programerat</title><link rel="shortcut icon" href="https://programerat.github.io//assets/images/programeret.png"><link rel="alternate" type="application/atom+xml" title="Programerat" href="https://programerat.github.io//atom.xml"><link rel="alternate" type="application/json" title="Programerat" href="https://programerat.github.io//feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://programerat.github.io//sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-size:15px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: #0197f6;--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;color:var(--light-text-color);border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}main{display:flex;max-width:47rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"›";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><body><main><section class="post"><div class="flex-row-between"> <a href="https://programerat.github.io//">« back</a> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><time datetime="2022-01-13T11:12:00+01:00">Jan 13, 2022 - 6 minuta, koha leximit. </time> <a href="https://github.com/donjetam" target="_blank" class="author"> <img width="20px" src="https://avatars.githubusercontent.com/donjetam" /> <label>Autor donjetam</label></a><h1 class="title"> Si të përdorni Docker Compose?</h1><span class="meta"> <a href="https://programerat.github.io//tag/Docker-compose,">Docker-compose,</a>, <a href="https://programerat.github.io//tag/php,">php,</a>, <a href="https://programerat.github.io//tag/mysql">mysql</a></span><p>Në <a href="https://programerat.github.io/2022/01/si-te-krijoni-aplikacionin-tuaj-te-pare-me-docker">artikullin e parë</a> kemi bërë një prezentim të shkurtër për të parë se qfarë është Docker, si mund ta instaloni dhe si mund ta konfiguroni Docker për një aplikacion bazik në PHP. Në këtë artikull do të tregojmë si mund ta përdorim Docker Compose si dhe do të ndërtojmë një aplikacion të thjeshtë në PHP që do të komunikojë me MySQL.</p><h3 id="docker-compose"> Docker Compose <a href="#docker-compose">#</a></h3><p>Në artikullin e kaluar mësuam si të krijojmë një Dockerfile dhe që përmes komandave docker build dhe docker run mund të ndërtojmë dhe të ekzekutojmë një kontejner. Mirëpo nëse duhet të ekzekutoni më shumë se një kontejner? Atëherë të ekzekutojmë këto komanda do të jetë e lodhshme.</p><p>Për këtë, ju mund të përdorni Compose, një skedar që përmbanë një bashkësi të instruksioneve, komandave për të performuar një operim/veprim/funksionim.</p><p>Ashtu siq kemi krijuar Dockerfile për të definuar se si mund të duket një imazh, ne po ashtu mund të krijojmë një <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> skedar ku mund të kemi imazhet që duam të përdorim, si dhe parametrat e komandave të docker ekzekutimit dhe të ndërtimit. Për të kuptuar më mirë do të marrim një shembull duke krijuar skedarin tonë të parë <code class="language-plaintext highlighter-rouge">docker-compose.yml.</code></p><p>Së pari hapeni terminalin tuaj dhe shikojeni versionin e docker compose në makinën tuaj duke shkruar këtë komand.</p><p><code class="language-plaintext highlighter-rouge">docker-compose --version</code></p><p><img src="../assets/images/docker-compose-v.png" alt="dockerComposeVersion" /></p><p>Do të krijojmë një skedar bazik të docker compose, për shembullin në artikullin e parë.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">website</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">php-demo</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/src/index.php:/var/www/html/</span> <span class="c1">#check volumes</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8000:80</span>
</code></pre></div></div><ol><li>Në rreshtin parë version duhet të shkruani versionin e docker compose.</li><li><code class="language-plaintext highlighter-rouge">services</code> përmbanë një listë të të gjitha veglave/serviset që keni për qëllim të ekzekutoni. Unë e kam emëruar <code class="language-plaintext highlighter-rouge">website</code> për arsye se do printojmë një titull në shfletues, por ju mund ta emëroni edhe ndryshe, nuk ka rëndësi. Duhet të mbani mend se këtë emer do ta përdorim për të komunikuar me kontejner të tjerë.</li><li><code class="language-plaintext highlighter-rouge">container_name</code> këtu duhet të vendosni emrin e kontejnerit.</li><li><code class="language-plaintext highlighter-rouge">image</code> duhet të vendosni emrin e imazhit.</li><li>Nën seksioni <code class="language-plaintext highlighter-rouge">build</code> ju shihni se kemi (<code class="language-plaintext highlighter-rouge">context</code>) që do të thotë është duke kërkuar për Dockerfile. Pra duhet të shkruani direktoriumin se ku gjendet Dockerfile i juaj.</li></ol><p>Skedari i juaj <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> është gati dhe – treguam për secilin seksion qka duhet të shkruajm.<br /> Përpara se të ekzekutoni është mirë të shikojm nëse konfigurimi në skedarin tonë është në rregull duke ekzekutuar në terminal komandën <code class="language-plaintext highlighter-rouge">docker-compose config</code>.</p><p>– Take screenshot.</p><p>Siq shihet edhe në foton paraprake pra konfigurimet tona kan qenë në rregull. Tani mund të ekzekutojm <code class="language-plaintext highlighter-rouge">docker-compose up</code> për të krijuar imazhin(nëse nuk ekziton) dhe për të krijuar kontejnerat.</p><p>Screnshot.</p><p>Tani do të instalojmë MySQL. Kam zgjedhur MySQL v8 ndërsa ju mund të zgjedhni edhe ndonjë version tjetër. Do të editojmë <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> dhe do të shtojmë konfigurimet për të instaluar MySQL.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">mysql</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:8.0</span>
        <span class="na">container_name</span><span class="pi">:</span> <span class="s">mysql-server</span>
        <span class="na">command</span><span class="pi">:</span> <span class="s">--default-authentication-plugin=mysql_native_password</span>
<span class="c1">#        working_dir: /application</span>
        <span class="na">volumes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">.:/application</span>
        <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">MYSQL_ROOT_PASSWORD=.test.</span>
          <span class="pi">-</span> <span class="s">MYSQL_DATABASE=my_db</span>
          <span class="pi">-</span> <span class="s">MYSQL_USER=db_user</span>
          <span class="pi">-</span> <span class="s">MYSQL_PASSWORD=.mypwd</span>
        <span class="na">ports</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">8082:3306"</span>
<span class="err">  </span><span class="na">website</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">php-demo</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">./</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/src:/var/www/html</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8000:80</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mysql</span>
</code></pre></div></div><p>Në këtë konfigurim ju mund të shihni se kemi shtuar një seksion të ri <code class="language-plaintext highlighter-rouge">envrionment</code> i cili përmbanë disa parametra që lidhen me serverin MySQL. Porti i parazgjedhur <code class="language-plaintext highlighter-rouge">3306</code> është mapuar(eng. mapped) me portin <code class="language-plaintext highlighter-rouge">8082</code>. Seksioni restart: gjithmonë nënkupton kurdo që fillon kontejneri, MyQL do të fillojë po ashtu. Mund të keni vërejtur se kemi shtuar edhe seksionin <code class="language-plaintext highlighter-rouge">depends_on</code>, kjo nënkupton që për të filluar servisi PHP, duhet sê pari të filloj serveri MySQL.</p><p>Duhet të bëjmë disa ndryshime në Dockerfile, ku do të shtojmë konfigurime për instalimin e MySQL.</p><div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> php:8.0-apache</span>
<span class="c">#Install git</span>
<span class="k">RUN </span>apt-get update <span class="se">\
</span>    <span class="o">&amp;&amp;</span> apt-get <span class="nb">install</span> <span class="nt">-y</span> 
<span class="k">RUN </span>docker-php-ext-install pdo pdo_mysql mysqli
<span class="k">COPY</span><span class="s"> src/ /var/www/html/</span>
<span class="k">EXPOSE</span><span class="s"> 80</span>
</code></pre></div></div><p>Ju duhet të instaloni një paket menagjuse për të ekzekutuar komandat e juaja mbrenda kontejnerit. Psh. apt-get është një paket menagjuse që ndihmon në trajtimin e paketave në Linux. Si dhe duhet të instaloni Git.</p><blockquote><p>Për më shumë detaje për paketa menagjuse ju lutem lexoni më shumë. – shto linkun</p></blockquote><p>Kemi instaluar PHP extension si dhe MySQL. Në këtë rast docker ofron docker-php-ext-install për te instaluar shtesat për PHP. Nese deshironi mund te instaloni edhe PHP Composer(shto linkun) e dim që është një paket menagjuse për PHP.</p><p>Për të implementuar ndryshimet qe i kemi bërë në Dockerfile ne duhet të ekzekutojm komandën docker-compose up –build. Nëse nuk e shtojm –build docker-compose do të pranoj(access) imazhin i cili është shkarkuar më parë dhe konfigurimet e saj.</p><p>Nëse shkoni në shleftues localhost:8080 mund të shihni se të gjitha shtesat per mysql janë instaluar.</p><p>Ndoshta jeni duke pytur veten se si mund të shohim nëse është instaluar git si dhe nëse është duke ekzekutuar/running mysql?</p><h4 id="lidhshmëria-në-mes-kontejnerëve-në-docker"> Lidhshmëria në mes kontejnerëve në Docker <a href="#lidhshmëria-në-mes-kontejnerëve-në-docker">#</a></h4><p>Tash do të shohim si është bërë lidhshmëria në mes kontejnerëve në Docker.</p><p>Përmendëm më lart se Docker na lejon me i ekzekutu komadat në kotejnerin që kemi krijuar dhe këtë mund ta bëjm duke ekzekutar komandën docker exec. Vihet pytja si mund të kyqem në MySQL? Së pari ne duhet të dijm emrin e imazhit për MySQL, dhe këtë informat e marin duke ekzekutuar docker ps -a në terminal.</p><p>Shikoni konfigurimet në <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> që kemi bërë dhe e shihni që emrin e kontejnerit kemi vendos <code class="language-plaintext highlighter-rouge">mysql-server-80</code>. Dhe përgjigjen e pytjës që bëm mund ta marrim duke ekzekutuar këtë kommand në terminal: <code class="language-plaintext highlighter-rouge">docker exec -it mysql-server-80 bash -l</code></p><p>-it –&gt; –</p><p>Take screenshot.</p><p>Tash jemi mrena kontejnerit, na lejohet të shkruajm komanda të Linux pasi kemi instaluar paketen menagjuse apt-get. Shkruani komandën <code class="language-plaintext highlighter-rouge">ls</code> ose qfar do komande tjetër.</p><p>Takse screenshot.</p><p>Për tu kyqur në databazë duhet të shkruani këtë komand. <code class="language-plaintext highlighter-rouge">mysql -u root -p</code> <code class="language-plaintext highlighter-rouge">-u</code> -&gt; user <code class="language-plaintext highlighter-rouge">-p</code> -&gt; password</p><p>Nëse doni me i pa databazat, duhet të shkruani në terminalin tuaj <code class="language-plaintext highlighter-rouge">show databases</code>.</p><p>Pra ktu treguam se si mund të shohim si është duke ekzekutar MySQL brenda Docker. Por si mund të interakt MySQL jasht docker? Si mund të konektohet MySQL client me MySQL server mbrenda kontejner? Këtë lidhje mund ta bëjm nëse bëjm port forwarding.</p><p>Së pari duhet të dijm id e kontejnerit si dhe portin dhe këto informata mund të gjejm duke ekzekutuar kommanden docker ps -a. Take screenshot. Mund të shihni se si Porti është percjell si dhe në cilin IP.</p><p>Në rastin ton kemi <code class="language-plaintext highlighter-rouge">0.0.0.0:8082-&gt;3306/tcp</code>. Pra <code class="language-plaintext highlighter-rouge">0.0.0.0</code> është host dhe porti është <code class="language-plaintext highlighter-rouge">8082</code>.</p><p>Një komand tjeter se si mund të shihni portin e një kontejnerit <code class="language-plaintext highlighter-rouge">docker port 354675757456(containerid)</code>.</p><h4 id="interaksioni-në-mes-disa-kontejnerve-në-docker"> Interaksioni në mes disa kontejnerve në Docker <a href="#interaksioni-në-mes-disa-kontejnerve-në-docker">#</a></h4><p>Pra kuptuam se si docker mund të kominikoj jasht, por cfar nëse kontejnerët duhet me interakt mes vete?</p><p>Një mënyr është të lidhemi(konektohemi) nëpermes IP së brendshme. Këtë mund të shihni duke shkruar komandën në terminalin tuaj docker inspect [container-id], ky container-id është ID e kontejnerit për MySQL.</p><p>Tash do të editojm index.php dhe të shkruajm kodin për të bërë lidhjen me databazë.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;?php</span>
<span class="nv">$conn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">mysqli</span><span class="p">(</span><span class="s2">"mysql"</span><span class="p">,</span> <span class="s2">"root"</span><span class="p">,</span> <span class="s2">"."</span><span class="p">,</span> <span class="s2">"my_db"</span><span class="p">);</span>
<span class="c1">// Check connection</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">connect_error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">die</span><span class="p">(</span><span class="s2">"Connection failed: "</span> <span class="mf">.</span> <span class="nv">$conn</span><span class="o">-&gt;</span><span class="n">connect_error</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT name FROM users"</span><span class="p">;</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$conn</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="n">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// output data of each row</span>
	<span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">())</span> <span class="p">{</span>
		<span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span><span class="mf">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	<span class="k">echo</span> <span class="s2">"0 results"</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$conn</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>

</code></pre></div></div><p>Nëse doni të ndalni <code class="language-plaintext highlighter-rouge">docker-compose</code>, atëher duhet të shkruani këtë komand <code class="language-plaintext highlighter-rouge">docker-compose down</code>.</p><h2 id="konkluzioni"> Konkluzioni <a href="#konkluzioni">#</a></h2><p>Në këtë artikull mësuam se si mund të konfigurojm mjesdise të shumëfishta me ndihmën e docker.</p></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/2022/01/si-te-krijoni-aplikacionin-tuaj-te-pare-me-docker"><div class="nav-arrow">Previous</div><span class="post-title">Si të krijoni aplikacionin tuaj të parë me Docker</span> </a> <a class="post-nav-item post-nav-next" href="/2022/01/modelet-e-strukturimit-te-kodit-modeli-dekorues"><div class="nav-arrow">Next</div><span class="post-title">Si ta përdorim modelin dekorues (eng. Decorator Pattern).</span> </a></nav></section>//Shpreh mendimin tend. <script src="https://utteranc.es/client.js" repo="programerat/programerat.github.io" issue-term="title" label="Komento" theme="github-dark" crossorigin="anonymous" async> </script></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><footer class="social-footer"><div class="social-footer-icons"> <a href="https://github.com/programerat" title="Github profile, nothing much there, yet" target="_blank" rel="noopener noreferrer"><i class="fa fa-github social-button-custom " aria-hidden="true"></i></a> <a href="https://programerat.github.io//atom.xml" title="Feed RSS" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss social-button-custom" aria-hidden="true"></i></a> <a href="https://github.com/programerat/programerat.github.io" title="Browse the code" target="_blank" rel="noopener noreferrer"><i class="fa fa-code social-button-custom " aria-hidden="true"></i></a> <a href="https://facebook.com/programerat" title="Facebook page" target="_blank"><i class="fa fa-facebook social-button-custom " aria-hidden="true"></i></a> <a href="https://www.youtube.com/channel/UCi5M70eXEbQkAV4fyfrbOuQ" title="youtube channel" target="_blank"><i class="fa fa-youtube social-button-custom " aria-hidden="true"></i></a> <a href="https://discord.gg/QqPKQVEK" title="Discord Chat" target="_blank"><i class="fab fa-discord social-button-custom" aria-hidden="true"></i></a></div></footer></html>

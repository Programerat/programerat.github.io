<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta property="fb:pages" content="277479082422114" /><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta property="og:image" content="https://programerat.github.io//assets/images/"><link rel="stylesheet" href="https://programerat.github.io//assets/css/style.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/material-kit.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/toc.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/all.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/brands.min.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/regular.min.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/solid.min.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/fontawesome.min.css"><link rel="stylesheet" href="https://programerat.github.io//assets/css/syntax.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous"><title> Modelet e strukturimit të kodit, modeli komandë (eng. Command Pattern) - Programerat</title><link rel="shortcut icon" href="https://programerat.github.io//assets/images/programeret.png"><link rel="alternate" type="application/atom+xml" title="Programerat" href="https://programerat.github.io//atom.xml"><link rel="alternate" type="application/json" title="Programerat" href="https://programerat.github.io//feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://programerat.github.io//sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *{padding:0}html{font-size:15px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}#intro{color:var(--main-text-color);width:50%;margin:20px auto}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: #0197f6;--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75}a{color:var(--link-color);text-decoration:none}.post{color:var(--main-text-color);min-width:min-content;max-width:max-content;width:60%;margin:5.5rem auto}.post p{margin:1rem 0}.meta{margin:1.4rem 0}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{width:fit-content;border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;color:var(--light-text-color);border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;text-overflow:ellipsis;font-weight:bold;width:100%}.article-icon{height:30px;width:30px;text-align:right;display:inline-block}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"›";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><body><nav class="navbar bg-light"><div class="container"> <a class="navbar-brand" href="https://programerat.github.io/"> <img src="https://programerat.github.io//assets/images/programeret.png" alt="" width="20" height="20" class="d-inline-block align-text-top"> Programerat </a><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav"><li class="nav-item"> <a class="nav-link active" aria-current="page" href="#">Home</a></li></ul></div><input class="form-control me-2" type="search" id="search-input" placeholder="Kërko artikujt" aria-label="Search"> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div></nav><main><section class="post"><div class="flex-row-between"> <a href="https://programerat.github.io//">« back</a></div><time datetime="2021-12-31T09:15:20+01:00"> 5 min </time><h1 class="title"> Modelet e strukturimit të kodit, modeli komandë (eng. Command Pattern)</h1><span class="meta"> <a href="https://programerat.github.io//tag/Design">Design</a>, <a href="https://programerat.github.io//tag/Patterns">Patterns</a>, <a href="https://programerat.github.io//tag/Command">Command</a></span> <br><blockquote><p>Njihet edhe si Veprim (eng. Action), Transakcion (eng. Transaction)</p></blockquote><p>Modeli Komandë përmbanë të gjitha parametrat e nevojshme për veprimin i cili do të bëhet në një komandë. Prandaj, kjo na lejon që komanda të ekzekutohet në mënyra të ndryshme.</p><p>Perparësitë e modelit komandë:</p><ol><li>E bën ndarjen e klasës që fillon procesin prej klasës që e kryen punën.</li><li>Lejon që të bëjmë një grup të komandave të njëpasnjëshme duke na e mundësuar një sistem rradhë pritje (eng. Queue System).</li><li>Zgjerimi është i lehtë, mund të bëhet pa u ndryshuar kodi ekzistues.</li><li>Mund të definohet sistemi për fshirjen e ndryshimeve (eng. Rollback).</li></ol><h3 id="konteksti-se-ku-do-ta-aplikojmë-modelin"> Konteksti se ku do ta aplikojmë modelin <a href="#konteksti-se-ku-do-ta-aplikojmë-modelin">#</a></h3><p>Ta zëmë që jemi në një shitore online, dhe dëshirojmë ta bëjmë një blerje. Zgjedhim produktin e fusim në kosh dhe klikojmë në butonin Bli. Kjo na drejton në një dritare për të mbushur të dhënat bankare dhe të konfirmojmë blerjen.</p><h3 id="shembulli-konkret-i-aplikuar-në-kod"> Shembulli konkret i aplikuar në kod <a href="#shembulli-konkret-i-aplikuar-në-kod">#</a></h3><p>Kodi në një <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">MVC</a> kornizë pune (<em>eng. framework</em>) sikur <a href="https://symfony.com/" target="_blank"> symfony </a> do të dukej si në vijim.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">CreateOrderController</span> <span class="p">{</span>
    
    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span> <span class="c1">//validimi i kërkesës do të bëhet në controller</span>
        <span class="nv">$order</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">createOrder</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">shouldBeApproved</span><span class="p">(</span><span class="nv">$order</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">approve</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">orderRepository</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">integrationBus</span><span class="o">-&gt;</span><span class="nf">send</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span> <span class="c1">//njofton sistemet tjera që një blerje është bërë </span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div><p>Nëse punojmë me një kornizë të punës (eng. Framework) MVC dhe nuk përdorim ndonjë organizim të kodit atëherë nuk do të kemi ndarje aty ku bëhet thirrja e serviseve dhe ku kryhet puna, andaj e gjithë logjika do të vendoset në një klasë të vetme. Prandaj edhe shtimi i logjikës të re ose ndryshimeve nuk do të jetë shumë i lehtë.</p><p>Ndryshimi se si do të ekzekutohet logjika në këtë rast, do të ishte shumë e vështirë.<br /> Gjithashtu nëse dëshirojmë ta shtojmë një mekanizëm për kthimin e ekzekutimit që mos të ruajmë të dhënat të përgjysmuara atëherë duhet ti ndryshojmë të gjithë kontrollerët.</p><h3 id="uml-diagrami-i-modelit-komandë"> UML Diagrami i modelit Komandë <a href="#uml-diagrami-i-modelit-komandë">#</a></h3><p><img src="/assets/diagrams/TheCommandPattern.png" alt="UML diagrami i modelit komandë" /></p><p><img src="/assets/diagrams/Design_Command_Design_Pattern_UML.jpeg" alt="UML diagrami i modelit komandë i huazuar nga wikipedia." /></p><p>Klasa që thërret (eng. Invoke) komandat e di se cilën metodë dhe cilat parametra ti ekzekutojë, por nuk ka dijeni se çka bën ajo metodë.</p><p>P.SH: Nëse e dërgon veturën tek miku yt mekanik, ai nuk mund të bëj asgjë nëse nuk i tregon se çfarë dëshiron ti.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$mechanic</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Mechanic</span><span class="p">();</span>
<span class="nv">$mechanic</span><span class="o">-&gt;</span><span class="nf">replaceWheels</span><span class="p">(</span><span class="s1">'type'</span><span class="p">,</span> <span class="s1">'size'</span><span class="p">,</span> <span class="s1">'model'</span><span class="p">);</span>
</code></pre></div></div><h3 id="implementimi-i-modelit-komandë"> Implementimi i modelit komandë <a href="#implementimi-i-modelit-komandë">#</a></h3><p>Në shembullin e ardshëm do ta shihni që nëse një kërkesë vjen që ta krijojmë një blerje.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">class</span> <span class="nc">CreateOrderCommand</span> <span class="kd">implements</span> <span class="nc">Command</span> <span class="p">{</span>
    
    <span class="k">private</span> <span class="kt">CreateOrderHandler</span> <span class="nv">$receiver</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">Receiver</span> <span class="nv">$receiver</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">receiver</span> <span class="o">=</span> <span class="nv">$receiver</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//komanda e njeh pranuesin por nuk ka dijeni se cka ben ai.</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">():</span> <span class="kt">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">receiver</span>
            <span class="o">-&gt;</span><span class="nf">checkMoneyLimit</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">totalAmount</span><span class="p">())</span>
            <span class="o">-&gt;</span><span class="nf">identifyCompany</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getComapany</span><span class="p">())</span>
            <span class="o">-&gt;</span><span class="nf">checkRisk</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getCustomer</span><span class="p">())</span>
            <span class="o">-&gt;</span><span class="nf">authorizeOrder</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getOrder</span><span class="p">())</span>
        <span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//në rastin e mekanikut kjo klasë do ta luaj rolin e ndërmjetsuesit në mes teje dhe mekanikut.</span>
<span class="kd">class</span> <span class="nc">CreateOrderInvoker</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kt">array</span> <span class="nv">$commands</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">addCommand</span><span class="p">(</span><span class="kt">Command</span> <span class="nv">$command</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">commands</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$command</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">():</span> <span class="kt">void</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">commands</span> <span class="k">as</span> <span class="nv">$command</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$command</span><span class="o">-&gt;</span><span class="nf">execute</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">dispatchIntegrationMessages</span><span class="p">();</span> 
    <span class="p">}</span>

<span class="c1">//kjo i dërgon mesazhet për të njoftuar sistemet tjera që një blerje është bërë.</span>
    <span class="k">private</span> <span class="k">function</span> <span class="n">dispatchIntegrationMessages</span><span class="p">():</span> <span class="kt">void</span> 
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">bus</span><span class="o">-&gt;</span><span class="nf">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nc">OrderCreated</span><span class="p">(</span><span class="nv">$order</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//kontrolleri do te duket si ne vijim.</span>
<span class="kd">class</span> <span class="nc">CreateOrderController</span> 
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">CreateOrderHandler</span> <span class="nv">$createOrderHandler</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">CreateOrderInvoker</span> <span class="nv">$invoker</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">CreateOrderHandler</span> <span class="nv">$createOrderHandler</span><span class="p">,</span> <span class="kt">CreateOrderInvoker</span> <span class="nv">$invoker</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">createOrderHandler</span> <span class="o">=</span> <span class="nv">$createOrderHandler</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">invoker</span> <span class="o">=</span> <span class="nv">$invoker</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$command</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CreateOrderCommand</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">createOrderHandler</span><span class="p">,</span> <span class="nv">$request</span><span class="p">);</span>
        
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">invoker</span>
        <span class="o">-&gt;</span><span class="nf">addCommand</span><span class="p">(</span><span class="nv">$command</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="nf">execute</span><span class="p">();</span>

        <span class="c1">//ose</span>
        <span class="c1">//-&gt;addCommand($createOrderCommand)</span>
        <span class="c1">//-&gt;addCommand($confirmOrderCommand)</span>
        <span class="c1">//-&gt;queue();</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div><p>Siç shihet në shembull, komandat mund të shtohen njëra pas tjetrës. , Mënyra se si do të ekzekutohen ato mund të përmbaj logjikë specifike dhe nëse diçka shkon gabim atëherë mund të vendoset një mekanizëm që i kthen ndryshimet e prezentuara (eng. Rollback).</p><p>Nëse duam të shtojmë komanda të reja atëherë nuk ka nevojë që ta ndryshojmë kodin ekzistues, gjë që i mbështetë principet solid.</p><h3 id="vështiresit-që-ka-ky-model"> Vështiresit që ka ky model <a href="#vështiresit-që-ka-ky-model">#</a></h3><p>Shumë klasa duhet të inkuadrohen në procese që të kryhet një komandë, andaj edhe duhet të punohet me kujdes të shtuar duke menduar mirë se çfarë klasa shtohen. Sygjeroj që nëse përdorni DDD (eng. Domain Driven Design) atëherë ky model do të jetë më natyral në projektin tuaj.</p><p>Sugjerohet në disa libra që edhe komanda prej kërkesës (eng. Query) të jetë e ndarë. Komanda nuk duhet të kthej rezultat ndërsa kërkesa është që të kthej rezultat. Ky term është propozuar nga autori <a href="https://www.amazon.com/gp/product/0136291554/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0136291554&amp;linkCode=as2&amp;tag=martinfowlerc-20" target="_blank"> Bertrand Meyer në librin e tij</a>.</p><blockquote><p>“Secili mundet me shkru kod që kompjuteri e kupton. Programerat e mirë shkruajnë kod që të tjerët e kutojnë.” – Martin Fowler</p></blockquote></section><section class="toc"><ul><li><a href="#konteksti-se-ku-do-ta-aplikojmë-modelin">Konteksti se ku do ta aplikojmë modelin</a></li><li><a href="#shembulli-konkret-i-aplikuar-në-kod">Shembulli konkret i aplikuar në kod</a></li><li><a href="#uml-diagrami-i-modelit-komandë">UML Diagrami i modelit Komandë</a></li><li><a href="#implementimi-i-modelit-komandë">Implementimi i modelit komandë</a></li><li><a href="#vështiresit-që-ka-ky-model">Vështiresit që ka ky model</a></li></ul><svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg"><path stroke="#444" stroke-width="3" fill="transparent" stroke-dasharray="0, 0, 0, 1000" stroke-linecap="round" stroke-linejoin="round" transform="translate(-0.5, -0.5)" /> </svg></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/2021/12/dp-chain-of-responsibility"><div class="nav-arrow">Previous</div><span class="post-title">Paternet e dizajnimit - Paterni Strategji</span> </a> <a class="post-nav-item post-nav-next" href="/2022/01/si-te-krijoni-aplikacionin-tuaj-te-pare-me-docker"><div class="nav-arrow">Next</div><span class="post-title">Si të krijoni aplikacionin tuaj të parë me Docker</span> </a></nav></section>//Shpreh mendimin tend. <script src="https://utteranc.es/client.js" repo="programerat/programerat.github.io" issue-term="title" label="Komento" theme="github-dark" crossorigin="anonymous" async> </script> <script src="https://programerat.github.io//assets/js/toc.js"></script></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><footer class="social-footer"><div class="social-footer-icons"> <a href="https://github.com/programerat" title="Github profile, nothing much there, yet" target="_blank" rel="noopener noreferrer"><i class="fa fa-github social-button-custom " aria-hidden="true"></i></a> <a href="https://programerat.github.io//atom.xml" title="Feed RSS" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss social-button-custom" aria-hidden="true"></i></a> <a href="https://github.com/programerat/programerat.github.io" title="Browse the code" target="_blank" rel="noopener noreferrer"><i class="fa fa-code social-button-custom " aria-hidden="true"></i></a> <a href="https://facebook.com/programerat" title="Facebook page" target="_blank"><i class="fa fa-facebook social-button-custom " aria-hidden="true"></i></a> <a href="https://www.youtube.com/channel/UCi5M70eXEbQkAV4fyfrbOuQ" title="youtube channel" target="_blank"><i class="fa fa-youtube social-button-custom " aria-hidden="true"></i></a> <a href="https://discord.gg/XbfP9quv" title="Discord Chat" target="_blank"><img src="/assets/images/discord.svg" width="20px" alt="discord chat" ></a></div></footer></html>

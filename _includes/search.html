<input type="text" id="search" autocomplete="false" placeholder="Search">

<script>
    var posts;
    $.getJSON('{{site.baseurl}}/search.json', function(data){
      posts = data;
    });
    var searchIsOpen = false;
    $(document).ready(function(){
      var postContainer = $('#post-list');
      var search = $('#search');
      var currentPosts = postContainer.html();

      search.on('input change', function(){
        keyword = $(this).val();
        postContainer.html('')
          for(var i=0; i < posts.length; i++) {
            if(posts[i].title.toLowerCase().indexOf(keyword) !== -1 || posts[i].description.toLowerCase().indexOf(keyword) !== -1) {
              var content = postContainer.data('prototype');
              content = content.replace(/__url__/g, posts[i].url);
              content = content.replace(/__title__/g, posts[i].title);
              content = content.replace(/__description__/g, posts[i].description);
              postContainer.append(content);
            }
          }
      });
      
      $('body').keydown(function(e){
        
        var char = e.key.toLowerCase();
        if (char == "s" && !searchIsOpen) {
          search.fadeIn(100);
          search.focus();
          searchIsOpen = true;
        }
        
        if(char == "escape" && searchIsOpen) {
          search.fadeOut(100);
          postContainer.html(currentPosts);
          search.val('');
          searchIsOpen = false;
        }
      });
    });
  </script>